{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://unemployment.nj.gov/schemas/claim-v1.0.json",
  "title": "UI Claimant Intake Form",
  "description": "NJ Unemployment Insurance claimant application form schema",
  "type": "object",
  "definitions": {
    "person_name": {
      "$id": "/definitions/person_name",
      "$schema": "https://json-schema.org/draft/2020-12/schema",
      "$anchor": "#/definitions/person_name",
      "type": "object",
      "properties": {
        "first_name": {
          "type": "string",
          "maxLength": 28
        },
        "last_name": {
          "type": "string",
          "maxLength": 28
        },
        "middle_initial": {
          "type": "string",
          "maxLength": 1,
          "pattern": "[A-Za-z]"
        },
        "suffix": {
          "type": "string",
          "enum": ["I", "II", "III", "IV", "junior", "senior"]
        }
      },
      "required": ["first_name", "last_name"]
    },
    "address": {
      "$id": "/definitions/address",
      "$schema": "https://json-schema.org/draft/2020-12/schema",
      "$anchor": "#/definitions/address",
      "type": "object",
      "properties": {
        "address": { "type": "string", "maxLength": 64 },
        "city": { "type": "string", "maxLength": 64 },
        "state": { "$ref": "#/definitions/state" },
        "zipcode": {
          "type": "string",
          "maxLength": 10,
          "pattern": "^\\d{5}(-\\d{4})?$"
        }
      },
      "required": ["address", "city", "state", "zipcode"]
    },
    "addressWithoutPOBox": {
      "$id": "/definitions/addressWithoutPOBox",
      "$schema": "https://json-schema.org/draft/2020-12/schema",
      "$anchor": "#/definitions/addressWithoutPOBox",
      "type": "object",
      "properties": {
        "address": {
          "type": "string",
          "maxLength": 64,
          "pattern": "^(?!.*(?:(.*((p|post)[-.\\s]*(o|off|office)[-.\\s]*(box|bin)[-.\\s]*)|.*((p |post)[-.\\s]*(box|bin)[-.\\s]*)))).*$"
        },
        "city": { "type": "string", "maxLength": 64 },
        "state": { "$ref": "#/definitions/state" },
        "zipcode": {
          "type": "string",
          "maxLength": 10,
          "pattern": "^\\d{5}(-\\d{4})?$"
        }
      },
      "required": ["address", "city", "state", "zipcode"]
    },
    "phone": {
      "$id": "/definitions/phone",
      "$schema": "https://json-schema.org/draft/2020-12/schema",
      "$anchor": "#/definitions/phone",
      "type": "object",
      "properties": {
        "number": {
          "type": "string",
          "minLength": 10,
          "maxLength": 32,
          "pattern": "^[(]?\\d{3}[)]?[-\\s.]?\\d{3}[-\\s.]?\\d{4}$"
        },
        "sms": {
          "type": "boolean"
        }
      },
      "required": ["number"]
    },
    "phoneWithSMS": {
      "$id": "/definitions/phoneWithSMS",
      "$schema": "https://json-schema.org/draft/2020-12/schema",
      "$anchor": "#/definitions/phoneWithSMS",
      "type": "object",
      "properties": {
        "number": {
          "type": "string",
          "minLength": 10,
          "maxLength": 32,
          "comment": "We do not enforce ^$ anchors to allow for international prefix, extra space, extension, etc",
          "pattern": "^[(]?\\d{3}[)]?[-\\s.]?\\d{3}[-\\s.]?\\d{4}$"
        },
        "sms": {
          "type": "boolean"
        }
      },
      "required": ["number", "sms"]
    },
    "state": {
      "$id": "/definitions/state",
      "$schema": "https://json-schema.org/draft/2020-12/schema",
      "$anchor": "#/definitions/state",
      "type": "string",
      "enum": [
        "AK",
        "AL",
        "AR",
        "AS",
        "AZ",
        "CA",
        "CO",
        "CT",
        "DC",
        "DE",
        "FL",
        "FM",
        "GA",
        "GU",
        "HI",
        "IA",
        "ID",
        "IL",
        "IN",
        "KS",
        "KY",
        "LA",
        "MA",
        "MD",
        "ME",
        "MH",
        "MI",
        "MN",
        "MO",
        "MP",
        "MS",
        "MT",
        "NC",
        "ND",
        "NE",
        "NH",
        "NJ",
        "NM",
        "NV",
        "NY",
        "OH",
        "OK",
        "OR",
        "PA",
        "PR",
        "PW",
        "RI",
        "SC",
        "SD",
        "TN",
        "TX",
        "UT",
        "VA",
        "VI",
        "VT",
        "WA",
        "WI",
        "WV",
        "WY"
      ]
    }
  },
  "properties": {
    "claimant_name": {
      "$ref": "#/definitions/person_name"
    },
    "alternate_names": {
      "type": "array",
      "items": { "$ref": "#/definitions/person_name" }
    },
    "LOCAL_claimant_has_alternate_names": {
      "type": "boolean"
    },
    "residence_address": {
      "$ref": "#/definitions/addressWithoutPOBox"
    },
    "mailing_address": {
      "$ref": "#/definitions/address"
    },
    "LOCAL_mailing_address_same": {
      "type": "boolean"
    },
    "claimant_phone": {
      "$ref": "#/definitions/phoneWithSMS"
    },
    "alternate_phone": {
      "$ref": "#/definitions/phone"
    },
    "email": {
      "type": "string",
      "format": "email",
      "maxLength": 128
    },
    "interpreter_required": {
      "type": "string",
      "enum": ["interpreter", "tty", "no_interpreter_tty"]
    },
    "preferred_language": {
      "type": "string",
      "enum": [
        "mandarin",
        "spanish",
        "haitian",
        "polish",
        "portuguese",
        "russian",
        "vietnamese",
        "other"
      ]
    },
    "preferred_language_other": {
      "type": "string",
      "maxLength": 64
    },
    "sex": {
      "type": "string",
      "enum": ["female", "male", "unspecified"]
    },
    "ethnicity": {
      "type": "string",
      "enum": ["hispanic", "not_hispanic", "opt_out"]
    },
    "race": {
      "type": "array",
      "items": {
        "type": "string",
        "enum": [
          "american_indian_or_alaskan",
          "asian",
          "black",
          "hawaiian_or_pacific_islander",
          "white",
          "opt_out"
        ]
      },
      "maxItems": 1,
      "$comment": "Until downstream can handle more than one race, return as an array of length 1"
    },
    "education_level": {
      "type": "string",
      "enum": [
        "none",
        "less_than_high_school",
        "some_high_school",
        "high_school_ged",
        "some_college",
        "associates",
        "bachelors",
        "some_graduate",
        "masters",
        "doctorate"
      ]
    },
    "ssn": {
      "description": "Claimant's social security number",
      "type": "string",
      "pattern": "^[0-9]{3}-[0-9]{2}-[0-9]{4}$"
    },
    "birthdate": {
      "description": "Date of birth",
      "type": "string",
      "format": "date"
    },
    "drivers_license_or_state_id_number": {
      "description": "Driverâ€™s license or state ID number",
      "type": "string"
    },
    "authorized_to_work": {
      "description": "Legally allowed to work in the US",
      "type": "boolean"
    },
    "authorization_type": {
      "description": "Type of work authorization",
      "type": "string",
      "enum": [
        "US_citizen_or_national",
        "permanent_resident",
        "temporary_legal_worker"
      ]
    },
    "not_authorized_to_work_explanation": {
      "description": "Reason not authorized to work in the US",
      "type": "string",
      "maxLength": 1024
    },
    "alien_registration_number": {
      "description": "Alien registration number",
      "type": "string",
      "pattern": "^[0-9]{3}-[0-9]{3}-[0-9]{3}$"
    },
    "attending_college_or_job_training": {
      "description": "If the claimant is currently attending college or job training",
      "type": "boolean"
    },
    "enrollment": {
      "description": "How the claimant enrolled in training",
      "type": "boolean"
    },
    "required_to_seek_work_through_hiring_hall": {
      "description": "If the claimant is required to seek work through a union hiring hall",
      "type": "boolean"
    },
    "union_name": {
      "description": "Name of claimant's union",
      "type": "string",
      "maxLength": 32
    },
    "union_local_number": {
      "description": "Union's local number",
      "type": "string",
      "maxLength": 16
    },
    "can_begin_work_immediately": {
      "description": "Is the claimant is able to begin work immediately",
      "type": "boolean"
    },
    "disability_applied_to_or_received": {
      "description": "What forms of disability has the claimant applied to and/or received",
      "type": "array",
      "$comment": "The value persisted to LOOPS should be boolean: whether disability and/or family leave are selected.",
      "items": {
        "enum": ["disability", "family_leave", "social_security", "none"]
      },
      "if": {
        "contains": {
          "const": "none"
        }
      },
      "then": {
        "maxItems": 1
      }
    },
    "disabled_immediately_before": {
      "description": "Claimant was disabled within the last 4 weeks",
      "type": "boolean"
    },
    "type_of_disability": {
      "description": "Plan from which the claimant gets their disability",
      "type": "string",
      "enum": ["state_plan", "private_plan", "workers_compensation"]
    },
    "date_disability_began": {
      "type": "string",
      "format": "date"
    },
    "recovery_date": {
      "type": "string",
      "format": "date"
    },
    "contacted_last_employer_after_recovery": {
      "type": "boolean"
    },
    "payment_method": {
      "type": "string",
      "enum": ["debit", "direct_deposit"]
    },
    "account_type": {
      "type": "string",
      "enum": ["checking", "savings"]
    },
    "routing_number": {
      "type": "string",
      "maxLength": 9,
      "pattern": "^[0-9]{9}$"
    },
    "account_number": {
      "type": "string",
      "maxLength": 17,
      "pattern": "^[0-9]{1,17}$"
    },
    "acknowledge_direct_deposit_option": {
      "type": "boolean"
    },
    "federal_income_tax_withheld": {
      "type": "boolean"
    },
    "apply_for_increased_payment_for_dependents": {
      "type": "boolean"
    }
  },
  "required": [
    "claimant_name",
    "residence_address",
    "mailing_address",
    "claimant_phone",
    "email",
    "interpreter_required",
    "sex",
    "ethnicity",
    "race",
    "education_level",
    "ssn",
    "birthdate",
    "drivers_license_or_state_id_number",
    "authorized_to_work",
    "attending_college_or_job_training",
    "required_to_seek_work_through_hiring_hall",
    "disability_applied_to_or_received",
    "can_begin_work_immediately",
    "payment_method",
    "federal_income_tax_withheld",
    "apply_for_increased_payment_for_dependents"
  ],
  "allOf": [
    {
      "if": {
        "properties": {
          "LOCAL_mailing_address_same": {
            "type": "boolean",
            "const": false
          }
        }
      },
      "then": {
        "required": ["mailing_address"]
      }
    },
    {
      "if": {
        "properties": {
          "attending_college_or_job_training": {
            "type": "boolean",
            "const": true
          }
        }
      },
      "then": {
        "required": ["enrollment"]
      }
    },
    {
      "if": {
        "properties": {
          "required_to_seek_work_through_hiring_hall": {
            "type": "boolean",
            "const": true
          }
        }
      },
      "then": {
        "required": ["union_name", "union_local_number"]
      }
    },
    {
      "if": {
        "properties": {
          "disability_applied_to_or_received": {
            "type": "string",
            "enum": ["disability", "family_leave"]
          }
        }
      },
      "then": {
        "required": [
          "disabled_immediately_before",
          "type_of_disability",
          "date_disability_began",
          "recovery_date",
          "contacted_last_employer_after_recovery"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "interpreter_required": {
            "type": "string",
            "enum": ["interpreter", "tty"]
          }
        }
      },
      "then": {
        "required": ["preferred_language"]
      }
    },
    {
      "if": {
        "properties": {
          "interpreter_required": {
            "type": "string",
            "enum": ["interpreter", "tty"]
          },
          "preferred_language": {
            "type": "string",
            "enum": ["other"]
          }
        }
      },
      "then": {
        "required": ["preferred_language_other"]
      }
    },
    {
      "if": {
        "properties": {
          "payment_method": {
            "type": "string",
            "enum": ["direct_deposit"]
          }
        }
      },
      "then": {
        "required": [
          "account_type",
          "routing_number",
          "account_number",
          "acknowledge_direct_deposit_option"
        ]
      }
    },
    {
      "if": {
        "properties": {
          "authorized_to_work": {
            "type": "string",
            "const": true
          }
        }
      },
      "then": {
        "required": ["authorization_type"]
      }
    },
    {
      "if": {
        "properties": {
          "authorized_to_work": {
            "type": "boolean",
            "const": false
          }
        }
      },
      "then": {
        "required": ["not_authorized_to_work_explanation"]
      }
    },
    {
      "if": {
        "properties": {
          "authorized_to_work": {
            "type": "boolean",
            "const": true
          },
          "authorization_type": {
            "not": {
              "type": "string",
              "enum": ["US_citizen_or_national"]
            }
          }
        }
      },
      "then": {
        "required": ["alien_registration_number"]
      }
    }
  ]
}
